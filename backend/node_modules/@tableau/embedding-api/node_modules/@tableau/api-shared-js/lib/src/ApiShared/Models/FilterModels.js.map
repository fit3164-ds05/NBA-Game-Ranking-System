{"version":3,"file":"FilterModels.js","sourceRoot":"","sources":["../../../../src/ApiShared/Models/FilterModels.ts"],"names":[],"mappings":"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","sourcesContent":["import * as Contract from '@tableau/api-external-contract-js';\nimport { DateRangeType, FilterDomainType, FilterType, PeriodType } from '@tableau/api-external-contract-js';\nimport { HierarchicalLevelSelectionState } from '@tableau/api-external-contract-js/lib/src/ExternalContract/Shared/Namespaces/Tableau';\nimport { DataSourceService } from '../Services/DataSourceService';\nimport { FilterService } from '../Services/FilterService';\nimport { ApiServiceRegistry, ServiceNames } from '../Services/ServiceRegistry';\nimport { ErrorHelpers } from '../Utils/ErrorHelpers';\n\nexport class Filter implements Contract.Filter {\n  public constructor(\n    protected _worksheetName: string,\n    protected _fieldName: string,\n    protected _filterType: FilterType,\n    protected _fieldId: string,\n    protected _registryId: number,\n  ) {}\n\n  public get worksheetName(): string {\n    return this._worksheetName;\n  }\n\n  public get fieldName(): string {\n    return this._fieldName;\n  }\n\n  public get fieldId(): string {\n    return this._fieldId;\n  }\n\n  public get filterType(): FilterType {\n    return this._filterType;\n  }\n\n  public getFieldAsync(): Promise<Contract.Field> {\n    const service = ApiServiceRegistry.get(this._registryId).getService<DataSourceService>(ServiceNames.DataSourceService);\n    return service.getFieldAsync(this._fieldId);\n  }\n\n  public getAppliedWorksheetsAsync(): Promise<Array<string>> {\n    const service = ApiServiceRegistry.get(this._registryId).getService<FilterService>(ServiceNames.Filter);\n    return service.getAppliedWorksheetsAsync(this._worksheetName, this._fieldId);\n  }\n\n  public setAppliedWorksheetsAsync(applyToWorksheets: Array<string>): Promise<Array<string>> {\n    ErrorHelpers.verifyParameter(applyToWorksheets, 'applyToWorksheets');\n    const uniqueWorksheets = new Set(applyToWorksheets);\n    const service = ApiServiceRegistry.get(this._registryId).getService<FilterService>(ServiceNames.Filter);\n    return service.setAppliedWorksheetsAsync(this._worksheetName, this._fieldName, this._fieldId, Array.from(uniqueWorksheets));\n  }\n}\n\nexport class CategoricalFilter extends Filter implements Contract.CategoricalFilter {\n  public constructor(\n    worksheetName: string,\n    fieldName: string,\n    fieldId: string,\n    filterType: FilterType,\n    registryId: number,\n    private _appliedValues: Array<Contract.DataValue>,\n    private _isExcludeMode: boolean,\n    private _isAllSelected?: boolean,\n  ) {\n    super(worksheetName, fieldName, filterType, fieldId, registryId);\n  }\n\n  public get isAllSelected(): boolean | undefined {\n    return this._isAllSelected;\n  }\n\n  public get appliedValues(): Array<Contract.DataValue> {\n    return this._appliedValues;\n  }\n\n  public get isExcludeMode(): boolean {\n    return this._isExcludeMode;\n  }\n\n  public getDomainAsync(domainType?: FilterDomainType): Promise<Contract.CategoricalDomain> {\n    if (!domainType) {\n      domainType = FilterDomainType.Relevant;\n    }\n\n    ErrorHelpers.verifyEnumValue<FilterDomainType>(domainType, FilterDomainType, 'FilterDomainType');\n\n    const service = ApiServiceRegistry.get(this._registryId).getService<FilterService>(ServiceNames.Filter);\n    return service.getCategoricalDomainAsync(this._worksheetName, this._fieldId, domainType);\n  }\n}\n\nexport class HierarchicalDataValue implements Contract.HierarchicalFilterDataValue {\n  public constructor(private _value: Contract.DataValue, private _hierarchicalPath: string, private _level: number) {}\n\n  public get value(): Contract.DataValue {\n    return this._value;\n  }\n\n  public get hierarchicalPath(): string {\n    return this._hierarchicalPath;\n  }\n\n  public get level(): number {\n    return this._level;\n  }\n}\n\nexport class HierarchicalLevelDetail implements Contract.HierarchicalLevelDetail {\n  public constructor(private _name: string, private _levelSelectionState: HierarchicalLevelSelectionState) {}\n\n  public get name(): string {\n    return this._name;\n  }\n\n  public get levelSelectionState(): HierarchicalLevelSelectionState {\n    return this._levelSelectionState;\n  }\n}\n\nexport class HierarchicalFilter extends Filter implements Contract.HierarchicalFilter {\n  public constructor(\n    worksheetName: string,\n    fieldName: string,\n    fieldId: string,\n    filterType: FilterType,\n    registryId: number,\n    private _dimensionName: string,\n    private _hierarchyCaption: string,\n    private _numberOfLevels: number,\n    private _levelDetails: Array<Contract.HierarchicalLevelDetail>,\n    private _appliedValues: Array<Contract.HierarchicalFilterDataValue>,\n    private _isAllSelected: boolean,\n  ) {\n    super(worksheetName, fieldName, filterType, fieldId, registryId);\n  }\n  getDomainAsync(domainType?: Contract.FilterDomainType): Promise<Contract.CategoricalDomain> {\n    throw new Error('Method not implemented.');\n  }\n\n  public get dimensionName(): string {\n    return this._dimensionName;\n  }\n\n  public get hierarchyCaption(): string {\n    return this._hierarchyCaption;\n  }\n\n  public get numberOfLevels(): number {\n    return this._numberOfLevels;\n  }\n\n  public get levelDetails(): Contract.HierarchicalLevelDetail[] {\n    return this._levelDetails;\n  }\n\n  public get isAllSelected(): boolean {\n    return this._isAllSelected;\n  }\n\n  public get appliedValues(): Array<Contract.HierarchicalFilterDataValue> {\n    return this._appliedValues;\n  }\n}\n\nexport class RangeFilter extends Filter implements Contract.RangeFilter {\n  public constructor(\n    worksheetName: string,\n    fieldName: string,\n    fieldId: string,\n    filterType: FilterType,\n    registryId: number,\n    private _min: Contract.DataValue,\n    private _max: Contract.DataValue,\n    private _includeNullValues: boolean,\n  ) {\n    super(worksheetName, fieldName, filterType, fieldId, registryId);\n  }\n\n  public get minValue(): Contract.DataValue {\n    return this._min;\n  }\n\n  public get maxValue(): Contract.DataValue {\n    return this._max;\n  }\n\n  public get includeNullValues(): boolean {\n    return this._includeNullValues;\n  }\n\n  public getDomainAsync(domainType?: FilterDomainType): Promise<Contract.RangeDomain> {\n    const service = ApiServiceRegistry.get(this._registryId).getService<FilterService>(ServiceNames.Filter);\n    if (!domainType) {\n      domainType = FilterDomainType.Relevant;\n    }\n\n    ErrorHelpers.verifyEnumValue<FilterDomainType>(domainType, FilterDomainType, 'FilterDomainType');\n\n    return service.getRangeDomainAsync(this._worksheetName, this._fieldId, domainType);\n  }\n}\n\nexport class RelativeDateFilter extends Filter implements Contract.RelativeDateFilter {\n  public constructor(\n    worksheetName: string,\n    fieldName: string,\n    fieldId: string,\n    filterType: FilterType,\n    registryId: number,\n    private _anchorDate: Contract.DataValue,\n    private _periodType: PeriodType,\n    private _rangeType: DateRangeType,\n    private _rangeN: number,\n  ) {\n    super(worksheetName, fieldName, filterType, fieldId, registryId);\n  }\n\n  public get anchorDate(): Contract.DataValue {\n    return this._anchorDate;\n  }\n\n  public get periodType(): PeriodType {\n    return this._periodType;\n  }\n\n  public get rangeType(): DateRangeType {\n    return this._rangeType;\n  }\n\n  public get rangeN(): number {\n    return this._rangeN;\n  }\n}\n\nexport class CategoricalDomain implements Contract.CategoricalDomain {\n  public constructor(private _values: Array<Contract.DataValue>, private _domainType: FilterDomainType) {}\n\n  public get values(): Array<Contract.DataValue> {\n    return this._values;\n  }\n\n  public get type(): FilterDomainType {\n    return this._domainType;\n  }\n}\n\nexport class RangeDomain implements Contract.RangeDomain {\n  public constructor(private _min: Contract.DataValue, private _max: Contract.DataValue, private _domainType: FilterDomainType) {}\n\n  public get type(): FilterDomainType {\n    return this._domainType;\n  }\n\n  public get min(): Contract.DataValue {\n    return this._min;\n  }\n\n  public get max(): Contract.DataValue {\n    return this._max;\n  }\n}\n"]}